<!doctype html>  
<html>  
  <head>
    <title><%=shopName%></title>
    <link rel="stylesheet" href="/styles.css">
  </head>
  <body>
    <!-- Page heading -->
    <h1>Register for <%=shopName%> Shop</h1>
    <p>Fill this Form out to Register</p>
    <!-- User details -->
    <form method="POST" action="/registered">  
        First Name: <input id="first" type="text" name="first" /> <br><br>
        Last Name: <input id="last" type="text" name="last" /> <br><br>
        Email: <input id="email" type="email" name="email" 
        required pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?$" /> <br><br>
        <input type="submit" value="OK" />  
    </form>

    <!-- Email Validation -->
    <script>
      document.querySelector("form").addEventListener("submit", function(e) {
        const email = document.getElementById("email").value.trim();
        const strictEmailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(\.[a-zA-Z]{2,})?$/;

        if (!strictEmailRegex.test(email)) {
          e.preventDefault();
          alert("Please enter a valid email address (e.g., user@example.com or user@example.co.uk).");
        }
      });
    </script>
  </body> 
</html>